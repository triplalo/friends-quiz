<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–•—Ç–æ —ñ–∑ –Ω–∞—Å? </title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–µ—Å–µ–ª—ã–π –º—É–ª—å—Ç—è—à–Ω—ã–π —à—Ä–∏—Ñ—Ç -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --bg: #2C3E50;
            --card-bg: #ecf0f1;
            --text: #2C3E50;
        }

        body {
            margin: 0;
            font-family: 'Nunito', sans-serif; /* –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç */
            background: #2C3E50;
            background-image: radial-gradient(#34495e 15%, transparent 16%), radial-gradient(#34495e 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            user-select: none;
        }

        h1, h2, .question-text {
            font-family: 'Fredoka One', cursive; /* –ú—É–ª—å—Ç—è—à–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
            letter-spacing: 1px;
        }

        .container {
            width: 95%;
            max-width: 850px;
            text-align: center;
            padding: 20px;
        }

        /* --- –≠–ö–†–ê–ù–´ --- */
        .screen {
            display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            animation: fadeIn 0.5s ease;
        }
        .screen.active {
            display: block; /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π */
        }

        /* –í–≤–æ–¥ –Ω–∏–∫–Ω–µ–π–º–∞ */
        .input-card {
            background: white;
            padding: 40px;
            border-radius: 30px;
            box-shadow: 0 10px 0 rgba(0,0,0,0.2);
            color: var(--text);
        }
        
        input {
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 15px;
            border: 3px solid #ddd;
            width: 80%;
            margin: 20px 0;
            outline: none;
            transition: 0.3s;
            font-family: 'Nunito', sans-serif;
            text-align: center;
        }
        input:focus {
            border-color: var(--secondary);
        }

        .btn-start {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Fredoka One', cursive;
            box-shadow: 0 6px 0 #c0392b;
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .btn-start:active {
            transform: translateY(6px);
            box-shadow: 0 0 0 #c0392b;
        }

        /* –í–æ–ø—Ä–æ—Å */
        .question-card {
            background: white;
            color: var(--text);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
            position: relative;
            z-index: 10;
        }

        .question-text {
            font-size: 1.6rem;
            line-height: 1.3;
        }

        /* –°–µ—Ç–∫–∞ –¥—Ä—É–∑–µ–π */
        .friends-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            padding-bottom: 20px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –¥—Ä—É–≥–∞ (–ú—É–ª—å—Ç—è—à–Ω–∞—è) */
        .friend-card {
            background: white;
            border-radius: 20px;
            cursor: pointer;
            padding: 8px;
            box-shadow: 0 6px 0 rgba(0,0,0,0.2);
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            position: relative;
            overflow: hidden;
        }

        .friend-card:hover {
            transform: translateY(-8px) scale(1.05); /* –ü—Ä—É–∂–∏–Ω–∏—Ç –≤–≤–µ—Ä—Ö */
        }

        .friend-card:active {
            transform: scale(0.9); /* –°–∂–∏–º–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ */
            box-shadow: 0 2px 0 rgba(0,0,0,0.2);
        }

        .friend-img {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            border-radius: 15px;
            border: 2px solid #eee;
        }

        .friend-name {
            margin-top: 5px;
            font-weight: 800;
            color: var(--text);
            font-size: 0.95rem;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä */
        .progress-wrapper {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 5px;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 12px;
            background: linear-gradient(90deg, #FF6B6B, #FFD93D);
            border-radius: 10px;
            width: 0%;
            transition: width 0.4s ease;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 650px) {
            .friends-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }
            .question-text { font-size: 1.2rem; }
            .btn-start { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

    <!-- –ó–≤—É–∫–∏ (—Å–∫—Ä—ã—Ç—ã–µ) -->
    <audio id="sound-pop" src="click.mp3"></audio>
    <audio id="sound-win" src="win.mp3"></audio>

    <div class="container">
        
        <!-- –≠–ö–†–ê–ù 1: –í–≤–æ–¥ –Ω–∏–∫–Ω–µ–π–º–∞ -->
        <div id="screen-start" class="screen active">
            <div class="input-card">
                <h1>–ü—Ä–∏–≤–µ—Ç! üëã</h1>
                <p>–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–≥—Ä—ã –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Å—è:</p>
                <input type="text" id="nickname-input" placeholder="–¢–≤–æ—ë –∏–º—è –∏–ª–∏ –∫–ª–∏—á–∫–∞" autocomplete="off">
                <br>
                <button class="btn-start" onclick="startGame()">–ü–û–ì–ù–ê–õ–ò! üöÄ</button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 2: –ò–≥—Ä–∞ -->
        <div id="screen-game" class="screen">
            <div class="progress-wrapper">
                <div class="progress-fill" id="progress"></div>
            </div>

            <div class="question-card">
                <div class="question-text" id="question">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>

            <div class="friends-grid" id="friends-container">
                <!-- –°—é–¥–∞ —Å–∫—Ä–∏–ø—Ç –≤—Å—Ç–∞–≤–∏—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ -->
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 3: –§–∏–Ω–∞–ª -->
        <div id="screen-end" class="screen">
            <div class="input-card">
                <h1>–£—Ä–∞! </h1>
                <p>–¢–≤–æ–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —É–ª–µ—Ç–µ–ª—ñ –≤ –±–∞–∑—É –°–ë–£.</p>
                <p>–í–°–ï –ë–£–õ–û –ù–ï –ê–ù–û–ù–Ü–ú–ù–ò–ú –Ü –í–°–Ü –£–ó–ù–ê–Æ–¢ –®–û –¢–ò –í–Ü–î–ü–û–í–Ü–í!!</p>
                <div style="font-size: 4rem; margin-top: 20px;">üòé</div>
            </div>
        </div>

    </div>

    <script>
        // ================= –ù–ê–°–¢–†–û–ô–ö–ò =================

        // –¢–≤–æ—è —Å—Å—ã–ª–∫–∞ (–Ø –£–ë–†–ê–õ –ë–õ–û–ö–ò–†–û–í–ö–£, —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxcOhsIlJ-DMNMWw7LY4ZpShGlM6jZc91s_e6pd7HFRqbZcJjz621WBPohJ1UEORo4/exec'; 

        // –¢–≤–æ–∏ –¥—Ä—É–∑—å—è
        const friendsData = [
            { name: "–ú–∞–∫—Å–∏–º", img: "1.jpg" },
            { name: "–Ø—Ä–∏–∫", img: "2.jpg" },
            { name: "–ö–æ—Å—Ç—è", img: "3.jpg" },
            { name: "–Ñ–≥–æ—Ä–æ–≤", img: "4.jpg" },
            { name: "–ì–Ω–∞—Ç", img: "5.jpg" },
            { name: "–¢—ñ–º–∞", img: "6.jpg" },
            { name: "–õ—å–æ—Ö–∞", img: "7.jpg" },
            { name: "–í–∞—Ä–µ–Ω—ñ–∫", img: "8.jpg" },
            { name: "–ë–∞—Å—é–∫", img: "9.jpg" },
            { name: "–Ñ–≥–æ—Ä", img: "10.jpg" },
            { name: "–î–∞–Ω—è", img: "11.jpg" },
            { name: "–ù–µ–∑", img: "12.jpg" },
            { name: "–Ü–≤–∞–Ω", img: "13.jpg" },
            { name: "–Ñ–≤—Å–µ–Ω–∫–æ", img: "14.jpg" }
            { name: "–¢–µ—Ö–Ω—ñ—á–Ω–∏–π", img: "15.jpg" }
        ];

        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
        const questions = [
            "–•—Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Å–ø—ñ—Ç?",
            "–•—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π –ª–æ—Ö?",
            "–•—Ç–æ –ª—É—á—à–∏–π –≥–µ–π–º–µ—Ä?",
            "–•—Ç–æ —Å–∞–º–∏–π —Ç–æ–∫—Å–∏—á–Ω—ñ–π, –Ω–æ –º–∏ –µ–≤–æ –ª—é–±–∏–º? ",
            "–•—Ç–æ —Å–∞–º–∏–π –∞–∫—Ç–∏–≤–Ω–∏–π ",
            "–•—Ç–æ —Å—Ç–∞–Ω–µ—Ç –º—ñ–ª–ª–∏–æ–Ω–µ—Ä–æ–º (–∏–ª–∏ —Å—è–¥–µ—Ç –≤ —Ç—é—Ä—å–º—É)? ",
            "–ö—Ç–æ —á–∞—â–µ –≤—Å–µ—Ö –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç? ",
            "–ö–æ–º—É –Ω–µ–ª—å–∑—è –¥–æ–≤–µ—Ä—è—Ç—å —Å–µ–∫—Ä–µ—Ç–∏? ",
            "–•—Ç–æ –≤—ñ–π–¥–µ—Ç –∂–µ–Ω—ñ—Ç—Å—è –ø–µ—Ä–≤–∏–º? ",
            "–•—Ç–æ –≤—Å–µ–≥–¥–∞ –ø–æ—Ä—Ç–∏—Ç –≤–∞–π–±—ñ–∫?",
            "–•—Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ—Ö –ø—å–µ—Ç? ",
            "–•—Ç–æ —à—É—Ç–∏—Ç —Ö—É–∂–µ –≤—Å—î–≥–æ",
            "–•—Ç–æ –≥–æ–ª–æ–≤–Ω–∏–π –ß–°–í?",
            "–•—Ç–æ —Å–∞–º–∏–π –±–æ–ª—å—à–æ–π –ø–æ–¥–∫–∞–±–ª—É—á–Ω—ñ–∫? ",
            "–•—Ç–æ —Å–∞–º–∏–π –≥–∞—Ä–Ω—ñ—à–∏–π?"
        ];

        // ================= –õ–û–ì–ò–ö–ê =================

        let currentQuestionIndex = 0;
        let answers = {}; 
        let userNickname = "–ê–Ω–æ–Ω–∏–º";

        // –°—Å—ã–ª–∫–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã
        const screenStart = document.getElementById('screen-start');
        const screenGame = document.getElementById('screen-game');
        const screenEnd = document.getElementById('screen-end');
        
        const questionEl = document.getElementById('question');
        const friendsContainer = document.getElementById('friends-container');
        const progressEl = document.getElementById('progress');
        const nicknameInput = document.getElementById('nickname-input');

        // –ó–≤—É–∫–∏
        const soundPop = document.getElementById('sound-pop');
        const soundWin = document.getElementById('sound-win');

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function startGame() {
            const name = nicknameInput.value.trim();
            if (!name) {
                alert("–≠–π, –≤–≤–µ–¥–∏ –∏–º—è!");
                return;
            }
            userNickname = name;
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω
            screenStart.classList.remove('active');
            screenGame.classList.add('active');

            // –ó–∞–ø—É—Å–∫–∞–µ–º –º—É–∑—ã–∫—É (–±—Ä–∞—É–∑–µ—Ä—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç –∑–≤—É–∫ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞)
            soundPop.volume = 0.5;
            soundWin.volume = 0.4;
            
            initGame();
        }

        function initGame() {
            renderFriends();
            showQuestion();
        }

        function renderFriends() {
            friendsContainer.innerHTML = '';
            friendsData.forEach(friend => {
                const card = document.createElement('div');
                card.className = 'friend-card';
                
                const img = document.createElement('img');
                img.src = friend.img; 
                img.className = 'friend-img';
                img.onerror = function() { this.src = 'https://via.placeholder.com/150?text=' + friend.name[0]; };

                const nameDiv = document.createElement('div');
                nameDiv.className = 'friend-name';
                nameDiv.textContent = friend.name;

                card.appendChild(img);
                card.appendChild(nameDiv);

                // –ö–ª–∏–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
                card.onclick = () => {
                    playPop();
                    handleAnswer(friend.name);
                };
                
                friendsContainer.appendChild(card);
            });
        }

        function showQuestion() {
            questionEl.style.opacity = 0;
            questionEl.style.transform = "scale(0.9)";
            
            setTimeout(() => {
                questionEl.textContent = questions[currentQuestionIndex];
                questionEl.style.transition = "all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
                questionEl.style.opacity = 1;
                questionEl.style.transform = "scale(1)";
                updateProgress();
            }, 200);
        }

        function updateProgress() {
            const percent = (currentQuestionIndex / questions.length) * 100;
            progressEl.style.width = percent + '%';
        }

        function handleAnswer(selectedName) {
            const currentQuestion = questions[currentQuestionIndex];
            answers[currentQuestion] = selectedName;
            
            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                finishGame();
            }
        }

        function finishGame() {
            screenGame.classList.remove('active');
            screenEnd.classList.add('active');
            
            soundWin.play().catch(e => console.log('Autoplay blocked'));

            sendDataToGoogleSheet();
        }

        function playPop() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–≤—É–∫ –Ω–∞ –Ω–∞—á–∞–ª–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∫–ª–∏–∫–∞—Ç—å –±—ã—Å—Ç—Ä–æ
            soundPop.currentTime = 0;
            soundPop.play().catch(e => {}); // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç
        }

        function sendDataToGoogleSheet() {
            // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π –ø–∞–∫–µ—Ç –¥–∞–Ω–Ω—ã—Ö
            const dataToSend = {
                nickname: userNickname, // –î–æ–±–∞–≤–ª—è–µ–º –∏–º—è –æ—Ç–≤–µ—á–∞—é—â–µ–≥–æ
                answers: answers
            };

            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dataToSend)
            });
        }
    </script>
</body>
</html>
